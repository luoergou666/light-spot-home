import{_ as C,c as w,o as x,a as c,b as P,r as b,d as B,e as a,w as n,f as v,F as T,g as I,h as R,t as m}from"./index-YFn0MCiN.js";const z={name:"ShipTreeCanvas",props:{width:{type:Number,default:1200},height:{type:Number,default:800}},data(){return{canvasWidth:1200,canvasHeight:800,ctx:null,shipTree:{title:"光点舰船树形图",levels:[{name:"护卫舰级别",color:"#00ff88",ships:[{name:"侦察舰",type:"frigate"},{name:"拦截舰",type:"frigate"},{name:"突击舰",type:"frigate"},{name:"电子攻击舰",type:"frigate"}]},{name:"驱逐舰级别",color:"#00ccff",ships:[{name:"拦截驱逐舰",type:"destroyer"},{name:"指挥驱逐舰",type:"destroyer"},{name:"战术驱逐舰",type:"destroyer"}]},{name:"巡洋舰级别",color:"#ffaa00",ships:[{name:"重型攻击巡洋舰",type:"cruiser"},{name:"重型拦截巡洋舰",type:"cruiser"},{name:"后勤巡洋舰",type:"cruiser"},{name:"侦察巡洋舰",type:"cruiser"},{name:"战略巡洋舰",type:"cruiser"}]},{name:"战列巡洋舰",color:"#ff6600",ships:[{name:"攻击型战列巡洋舰",type:"battlecruiser"},{name:"指挥舰",type:"battlecruiser"}]},{name:"战列舰级别",color:"#ff3300",ships:[{name:"攻击战列舰",type:"battleship"},{name:"黑色行动战列舰",type:"battleship"}]},{name:"无畏舰级别",color:"#cc00ff",ships:[{name:"无畏舰",type:"dreadnought"},{name:"航空母舰",type:"carrier"},{name:"力场辅助舰",type:"fax"}]},{name:"超级航母",color:"#ffffff",ships:[{name:"超级航母",type:"supercarrier"},{name:"泰坦",type:"titan"}]}]}}},mounted(){this.initCanvas(),this.drawShipTree(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)},methods:{initCanvas(){const e=this.$refs.canvas;this.ctx=e.getContext("2d"),this.handleResize()},handleResize(){const t=this.$refs.canvas.parentElement.getBoundingClientRect();this.canvasWidth=Math.min(this.width,t.width-20),this.canvasHeight=Math.min(this.height,this.canvasWidth*this.height/this.width);const i=this.$refs.canvas,s=window.devicePixelRatio||1;i.style.width=this.canvasWidth+"px",i.style.height=this.canvasHeight+"px",i.width=this.canvasWidth*s,i.height=this.canvasHeight*s,this.ctx&&(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(s,s),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high",this.drawShipTree())},drawShipTree(){this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.drawGrid(),this.drawTitle(),this.drawLevels(),this.drawCorpLogo()},drawGrid(){this.ctx.strokeStyle="rgba(0, 255, 255, 0.1)",this.ctx.lineWidth=.5;for(let t=0;t<=this.canvasWidth;t+=20)this.ctx.beginPath(),this.ctx.moveTo(t,0),this.ctx.lineTo(t,this.canvasHeight),this.ctx.stroke();for(let t=0;t<=this.canvasHeight;t+=20)this.ctx.beginPath(),this.ctx.moveTo(0,t),this.ctx.lineTo(this.canvasWidth,t),this.ctx.stroke()},drawTitle(){this.ctx.font="bold 36px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="#00ffff",this.ctx.shadowColor="rgba(0, 255, 255, 0.5)",this.ctx.shadowBlur=10,this.ctx.fillText(this.shipTree.title,this.canvasWidth/2,50),this.ctx.shadowColor="transparent",this.ctx.shadowBlur=0},drawLevels(){const t=(this.canvasHeight-200)/this.shipTree.levels.length;this.shipTree.levels.forEach((i,s)=>{const o=100+s*t;this.drawLevelLabel(i,o),this.drawShipsInLevel(i,o,t),s<this.shipTree.levels.length-1&&this.drawConnections(o,o+t)})},drawLevelLabel(e,t){this.ctx.fillStyle=e.color,this.ctx.fillRect(20,t-15,120,30),this.ctx.font="bold 14px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="#000000",this.ctx.fillText(e.name,80,t+5)},drawShipsInLevel(e,t,i){const u=(this.canvasWidth-200)/e.ships.length;e.ships.forEach((r,h)=>{const _=180+h*u;this.drawShipIcon(_,t-40/2,80,40,r,e.color),this.ctx.font="12px Arial",this.ctx.textAlign="center",this.ctx.fillStyle="#ffffff",this.ctx.fillText(r.name,_+80/2,t+40/2+15)})},drawShipIcon(e,t,i,s,o,u){this.ctx.strokeStyle=u,this.ctx.fillStyle="rgba(0, 0, 0, 0.7)",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.roundRect(e,t,i,s,5),this.ctx.fill(),this.ctx.stroke(),this.ctx.fillStyle=u,this.ctx.font="bold 10px Arial",this.ctx.textAlign="center";const r=e+i/2,h=t+s/2;switch(o.type){case"frigate":this.drawFrigateIcon(r,h);break;case"destroyer":this.drawDestroyerIcon(r,h);break;case"cruiser":this.drawCruiserIcon(r,h);break;case"battlecruiser":this.drawBattlecruiserIcon(r,h);break;case"battleship":this.drawBattleshipIcon(r,h);break;case"dreadnought":case"carrier":case"fax":this.drawCapitalIcon(r,h);break;case"supercarrier":case"titan":this.drawSuperCapitalIcon(r,h);break}},drawFrigateIcon(e,t){this.ctx.beginPath(),this.ctx.arc(e,t,8,0,Math.PI*2),this.ctx.fill()},drawDestroyerIcon(e,t){this.ctx.fillRect(e-10,t-3,20,6)},drawCruiserIcon(e,t){this.ctx.beginPath(),this.ctx.moveTo(e-12,t),this.ctx.lineTo(e,t-8),this.ctx.lineTo(e+12,t),this.ctx.lineTo(e,t+8),this.ctx.closePath(),this.ctx.fill()},drawBattlecruiserIcon(e,t){this.ctx.fillRect(e-15,t-5,30,10),this.ctx.fillRect(e-8,t-12,16,8)},drawBattleshipIcon(e,t){this.ctx.fillRect(e-18,t-6,36,12),this.ctx.fillRect(e-12,t-15,24,10)},drawCapitalIcon(e,t){this.ctx.beginPath(),this.ctx.moveTo(e,t-15),this.ctx.lineTo(e+15,t),this.ctx.lineTo(e,t+15),this.ctx.lineTo(e-15,t),this.ctx.closePath(),this.ctx.fill()},drawSuperCapitalIcon(e,t){this.ctx.beginPath(),this.ctx.moveTo(e,t-18),this.ctx.lineTo(e+18,t-6),this.ctx.lineTo(e+12,t+18),this.ctx.lineTo(e-12,t+18),this.ctx.lineTo(e-18,t-6),this.ctx.closePath(),this.ctx.fill()},drawConnections(e,t){this.ctx.strokeStyle="rgba(255, 255, 255, 0.3)",this.ctx.lineWidth=1;for(let i=0;i<5;i++){const s=200+i*200;this.ctx.beginPath(),this.ctx.moveTo(s,e+20),this.ctx.lineTo(s,t-20),this.ctx.stroke()}},drawCorpLogo(){const t=this.canvasWidth-100-20,i=this.canvasHeight-100-20,s=new Image;s.onload=()=>{this.ctx.drawImage(s,t,i,100,100)},s.src=P}}},H={class:"ship-tree-canvas-container"},L=["width","height"];function M(e,t,i,s,o,u){return x(),w("div",H,[c("canvas",{ref:"canvas",width:o.canvasWidth,height:o.canvasHeight,class:"ship-tree-canvas"},null,8,L)])}const A=C(z,[["render",M],["__scopeId","data-v-d4eed5c1"]]),K={class:"data-page"},$={class:"stats-overview"},D={class:"stat-content"},E={class:"stat-value"},N={class:"stat-label"},F={class:"main-data"},V={class:"asset-list"},Y={class:"asset-info"},G={class:"asset-category"},O={class:"asset-value"},Q={class:"asset-progress"},U={class:"asset-percentage"},X={__name:"Data",setup(e){const t=[{title:"成员名称",key:"name",width:150},{title:"状态",key:"status",width:80,render:(d,p)=>{const l=p.row.status;return d("span",{style:{color:l==="在线"?"#52c41a":"#999",fontWeight:"bold"}},l)}},{title:"最后活动",key:"lastSeen",width:100},{title:"当前活动",key:"activity"}],i=[{title:"日期",key:"date",width:120},{title:"作战类型",key:"operation",width:150},{title:"参与人数",key:"participants",width:100},{title:"作战结果",key:"result",width:100,render:(d,p)=>{const l=p.row.result;return d("span",{style:{color:l==="成功"||l==="胜利"?"#52c41a":"#f5222d",fontWeight:"bold"}},l)}},{title:"ISK收益",key:"isk",render:(d,p)=>d("span",{style:{color:"#ffd700",fontWeight:"bold"}},p.row.isk)}],s=b({totalMembers:240,activeMembersWeek:70,onlineNow:20,totalAssets:"15.2B ISK",monthlyIncome:"2.8B ISK",fleetOperations:45}),o=b([{name:"William Macefield",status:"在线",lastSeen:"刚刚",activity:"PVP作战"},{name:"Fourier玥",status:"在线",lastSeen:"5分钟前",activity:"舰队指挥"},{name:"Captain Dragonfly",status:"离线",lastSeen:"2小时前",activity:"新人培训"},{name:"6-Yuer",status:"在线",lastSeen:"刚刚",activity:"工业生产"},{name:"鲨鱼",status:"在线",lastSeen:"10分钟前",activity:"舰船制造"}]),u=b([{date:"2024-01-15",operation:"零安巡逻",participants:12,result:"成功",isk:"+450M"},{date:"2024-01-14",operation:"虫洞探索",participants:8,result:"成功",isk:"+280M"},{date:"2024-01-13",operation:"PVP作战",participants:15,result:"胜利",isk:"+120M"},{date:"2024-01-12",operation:"工业护航",participants:6,result:"成功",isk:"+80M"},{date:"2024-01-11",operation:"星系防御",participants:20,result:"成功",isk:"+200M"}]),r=b([{category:"舰船",value:8.5,unit:"B ISK",percentage:56},{category:"装备",value:3.2,unit:"B ISK",percentage:21},{category:"原材料",value:2.1,unit:"B ISK",percentage:14},{category:"ISK现金",value:1.4,unit:"B ISK",percentage:9}]),h=d=>({totalMembers:"总成员数",activeMembersWeek:"周活跃成员",onlineNow:"当前在线",totalAssets:"总资产",monthlyIncome:"月收入",fleetOperations:"舰队作战"})[d]||d,_=d=>({舰船:"#1890ff",装备:"#52c41a",原材料:"#faad14",ISK现金:"#f5222d"})[d]||"#1890ff";return B(()=>{console.log("数据页面加载完成")}),(d,p)=>{const l=v("Card"),g=v("Col"),y=v("Row"),S=v("Table"),W=v("Progress");return x(),w("div",K,[p[0]||(p[0]=c("div",{class:"page-header"},[c("h1",{class:"page-title"},"军团数据中心"),c("p",{class:"page-subtitle"},"实时监控军团运营状况")],-1)),c("div",$,[a(y,{gutter:16},{default:n(()=>[(x(!0),w(T,null,I(s.value,(f,k)=>(x(),R(g,{span:4,key:k},{default:n(()=>[a(l,{class:"stat-card"},{default:n(()=>[c("div",D,[c("div",E,m(f),1),c("div",N,m(h(k)),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),c("div",F,[a(y,{gutter:24},{default:n(()=>[a(g,{span:12},{default:n(()=>[a(l,{class:"data-card",title:"成员活动状态"},{default:n(()=>[a(S,{columns:t,data:o.value,"show-header":!0,size:"small"},null,8,["data"])]),_:1})]),_:1}),a(g,{span:12},{default:n(()=>[a(l,{class:"data-card",title:"军团资产分布"},{default:n(()=>[c("div",V,[(x(!0),w(T,null,I(r.value,f=>(x(),w("div",{key:f.category,class:"asset-item"},[c("div",Y,[c("span",G,m(f.category),1),c("span",O,m(f.value)+m(f.unit),1)]),c("div",Q,[a(W,{percent:f.percentage,"stroke-color":_(f.category),"show-info":!1},null,8,["percent","stroke-color"]),c("span",U,m(f.percentage)+"%",1)])]))),128))])]),_:1})]),_:1})]),_:1}),a(y,{style:{"margin-top":"24px"}},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(l,{class:"data-card",title:"近期舰队作战记录"},{default:n(()=>[a(S,{columns:i,data:u.value,"show-header":!0,size:"small"},null,8,["data"])]),_:1})]),_:1})]),_:1}),a(y,{style:{"margin-top":"24px"}},{default:n(()=>[a(g,{span:24},{default:n(()=>[a(l,{class:"data-card",title:"光点舰船树形图"},{default:n(()=>[a(A)]),_:1})]),_:1})]),_:1})])])}}},q=C(X,[["__scopeId","data-v-4fdcc2ec"]]);export{q as default};
